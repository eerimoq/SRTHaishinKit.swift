<!DOCTYPE html>
<html lang="en">
  <head>
    <title>SRTHaishinKit  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="SRTHaishinKit  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">SRTHaishinKit 0.1.2 Docs</a> (72% documented)</p>
        <div class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">SRTHaishinKit Reference</a>
        <img id="carat" src="img/carat.png" alt=""/>
        SRTHaishinKit  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/SRTConnection.html">SRTConnection</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SRTLogger.html">SRTLogger</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SRTStream.html">SRTStream</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/SRTLogFunctionalArea.html">SRTLogFunctionalArea</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/SRTLogLevel.html">SRTLogLevel</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/SRTMode.html">SRTMode</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/SRTSocketOption.html">SRTSocketOption</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/SRTPerformanceData.html">SRTPerformanceData</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='srthaishinkit' class='heading'>SRTHaishinKit</h1>

<p><a href="https://raw.githubusercontent.com/shogo4405/SRTHaishinKit.swift/master/LICENSE.md"><img src="https://img.shields.io/badge/License-BSD%203--Clause-blue.svg" alt="GitHub license"></a></p>

<ul>
<li>Camera and Microphone streaming library via SRT for iOS.</li>
<li><a href="https://shogo4405.github.io/SRTHaishinKit.swift/">API Documentation</a></li>
<li>This project status is working in progress.</li>
</ul>
<h2 id='features' class='heading'>üé® Features</h2>
<h3 id='srt' class='heading'>SRT</h3>

<ul>
<li>[x] Publish and Recording (H264/AAC)</li>
<li>[x] Playback(beta)</li>
<li>[ ] mode

<ul>
<li>[x] caller</li>
<li>[x] listener</li>
<li>[ ] rendezvous</li>
</ul></li>
</ul>
<h2 id='requirements' class='heading'>üåè Requirements</h2>

<table><thead>
<tr>
<th style="text-align: center">-</th>
<th style="text-align: center">iOS</th>
<th style="text-align: center">Xcode</th>
<th style="text-align: center">Swift</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">0.1.0+</td>
<td style="text-align: center">11.0+</td>
<td style="text-align: center">14.0+</td>
<td style="text-align: center">5.7</td>
</tr>
<tr>
<td style="text-align: center">0.0.0+</td>
<td style="text-align: center">8.0+</td>
<td style="text-align: center">10.0+</td>
<td style="text-align: center">4.2</td>
</tr>
</tbody></table>
<h2 id='installation' class='heading'>üîß Installation</h2>

<p>Not available.</p>

<ul>
<li>CocoaPods</li>
</ul>
<h3 id='carthage' class='heading'>Carthage</h3>
<pre class="highlight swift"><code><span class="n">github</span> <span class="s">"shogo4405/SRTHaishinKit.swift"</span> <span class="s">"0.1.2"</span>
</code></pre>
<h3 id='swift-package-manager' class='heading'>Swift Package Manager</h3>
<pre class="highlight plaintext"><code>https://github.com/shogo4405/SRTHaishinKit.swift
</code></pre>
<h2 id='cocoa-keys' class='heading'>‚òï Cocoa Keys</h2>

<p>Please contains Info.plist.</p>

<p>iOS 10.0+</p>

<ul>
<li>NSMicrophoneUsageDescription</li>
<li>NSCameraUsageDescription</li>
</ul>
<h2 id='prerequisites' class='heading'>Prerequisites</h2>

<p>Make sure you setup and activate your AVAudioSession.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">AVFoundation</span>
<span class="k">let</span> <span class="nv">session</span><span class="p">:</span> <span class="kt">AVAudioSession</span> <span class="o">=</span> <span class="kt">AVAudioSession</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="n">session</span><span class="o">.</span><span class="nf">setPreferredSampleRate</span><span class="p">(</span><span class="mi">44_100</span><span class="p">)</span>
    <span class="c1">// https://stackoverflow.com/questions/51010390/avaudiosession-setcategory-swift-4-2-ios-12-play-sound-on-silent</span>
    <span class="k">if</span> <span class="kd">#available(iOS 10.0, *)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="n">session</span><span class="o">.</span><span class="nf">setCategory</span><span class="p">(</span><span class="o">.</span><span class="n">playAndRecord</span><span class="p">,</span> <span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="n">allowBluetooth</span><span class="p">])</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">session</span><span class="o">.</span><span class="nf">perform</span><span class="p">(</span><span class="kt">NSSelectorFromString</span><span class="p">(</span><span class="s">"setCategory:withOptions:error:"</span><span class="p">),</span> <span class="nv">with</span><span class="p">:</span> <span class="kt">AVAudioSession</span><span class="o">.</span><span class="kt">Category</span><span class="o">.</span><span class="n">playAndRecord</span><span class="p">,</span> <span class="nv">with</span><span class="p">:</span>  <span class="p">[</span><span class="kt">AVAudioSession</span><span class="o">.</span><span class="kt">CategoryOptions</span><span class="o">.</span><span class="n">allowBluetooth</span><span class="p">])</span>
    <span class="p">}</span>
    <span class="k">try</span> <span class="n">session</span><span class="o">.</span><span class="nf">setMode</span><span class="p">(</span><span class="kt">AVAudioSessionModeDefault</span><span class="p">)</span>
    <span class="k">try</span> <span class="n">session</span><span class="o">.</span><span class="nf">setActive</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre>
<h2 id='srt-usage' class='heading'>SRT Usage</h2>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">connection</span> <span class="o">=</span> <span class="kt">SRTConnection</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">stream</span> <span class="o">=</span> <span class="kt">SRTStream</span><span class="p">(</span><span class="nv">connection</span><span class="p">:</span> <span class="n">connection</span><span class="p">)</span>
<span class="n">stream</span><span class="o">.</span><span class="nf">attachAudio</span><span class="p">(</span><span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">default</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">audio</span><span class="p">))</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
    <span class="c1">// print(error)</span>
<span class="p">}</span>
<span class="n">stream</span><span class="o">.</span><span class="nf">attachCamera</span><span class="p">(</span><span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">default</span><span class="p">(</span><span class="o">.</span><span class="n">builtInWideAngleCamera</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="nv">position</span><span class="p">:</span> <span class="o">.</span><span class="n">back</span><span class="p">))</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
    <span class="c1">// print(error)</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">hkView</span> <span class="o">=</span> <span class="kt">HKView</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="n">view</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span>
<span class="n">hkView</span><span class="o">.</span><span class="n">videoGravity</span> <span class="o">=</span> <span class="kt">AVLayerVideoGravity</span><span class="o">.</span><span class="n">resizeAspectFill</span>
<span class="n">hkView</span><span class="o">.</span><span class="nf">attachStream</span><span class="p">(</span><span class="n">rtmpStream</span><span class="p">)</span>

<span class="c1">// add ViewController#view</span>
<span class="n">view</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="n">hkView</span><span class="p">)</span>

<span class="n">connection</span><span class="o">.</span><span class="nf">connect</span><span class="p">(</span><span class="s">"srt://host:port?option=foo"</span><span class="p">)</span>
<span class="n">stream</span><span class="o">.</span><span class="nf">publish</span><span class="p">()</span>
</code></pre>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">connection</span> <span class="o">=</span> <span class="kt">SRTConnection</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">stream</span> <span class="o">=</span> <span class="kt">SRTStream</span><span class="p">(</span><span class="nv">connection</span><span class="p">:</span> <span class="n">connection</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">hkView</span> <span class="o">=</span> <span class="kt">MTHKView</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="n">view</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span>
<span class="n">hkView</span><span class="o">.</span><span class="n">videoGravity</span> <span class="o">=</span> <span class="kt">AVLayerVideoGravity</span><span class="o">.</span><span class="n">resizeAspectFill</span>
<span class="n">hkView</span><span class="o">.</span><span class="nf">attachStream</span><span class="p">(</span><span class="n">rtmpStream</span><span class="p">)</span>

<span class="c1">// add ViewController#view</span>
<span class="n">view</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="n">hkView</span><span class="p">)</span>

<span class="n">connection</span><span class="o">.</span><span class="nf">connect</span><span class="p">(</span><span class="s">"srt://host:port?option=foo"</span><span class="p">)</span>
<span class="n">stream</span><span class="o">.</span><span class="nf">play</span><span class="p">(</span><span class="s">""</span><span class="p">)</span>
</code></pre>
<h2 id='examples' class='heading'>üêæ Examples</h2>

<p>SRTHaishinKit needs other dependencies. Please build.</p>
<h3 id='prerequisites' class='heading'>Prerequisites</h3>
<pre class="highlight shell"><code>brew install cmake
</code></pre>
<h3 id='ios' class='heading'>iOS</h3>
<pre class="highlight shell"><code>carthage update --use-xcframeworks --platform iOS
</code></pre>
<h3 id='you-can-run-the-ffplay-as-srt-service' class='heading'>You can run the ffplay as SRT service.</h3>
<pre class="highlight shell"><code>ffplay -analyzeduration 100 -i <span class="s1">'srt://${YOUR_IP_ADDRESS}?mode=listener'</span>
</code></pre>
<h2 id='references' class='heading'>üìñ References</h2>

<ul>
<li><a href="https://www.haivision.com/products/srt-secure-reliable-transport/">https://www.haivision.com/products/srt-secure-reliable-transport/</a></li>
</ul>
<h2 id='license' class='heading'>üìú License</h2>

<p>BSD-3-Clause</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2023 <a class="link" href="https://github.com/shogo4405/SRTHaishinKit.swift" target="_blank" rel="external noopener">shogo4405</a>. All rights reserved. (Last updated: 2023-07-11)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ‚ô™‚ô´ v0.14.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</html>
